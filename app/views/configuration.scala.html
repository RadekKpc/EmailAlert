@*
* This template takes a single argument, a String containing a
* message to display.
*@
@()(implicit flash: Flash, request: RequestHeader, session: Session)

    @main("Email Alert") {
        @navbar("APP")
        @flash.get("Login").map(str => <div class="alert alert-success" role="alert">Login succeeded!</div>)
        @flash.get("Register").map(str => <div class="alert alert-success" role="alert">Registered!</div>)

        <div class="container mt-3">
            <button class="btn btn-primary" id="location">Send us your location!</button>
            <h3 id="confirm"></h3>
        </div>
        <script>
                document.getElementById("location").addEventListener('click',
                        () => {
                            console.log("Sent")
                            navigator.geolocation.getCurrentPosition((position) => {
                                console.log(position.coords.latitude, position.coords.longitude);
                                fetch('@routes.AppController.loadUserLonAndLat()', {
                                    method: 'POST', // or 'PUT'
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({
                                        lat: position.coords.latitude,
                                        lon: position.coords.longitude
                                    }),
                                })
                                        .then(response => response.json())
                                        .then(data => {
                                            console.log('Success:', data);
                                            document.getElementById("confirm").innerHTML = "DONE!"
                                        })
                                        .catch((error) => {
                                            console.error('Error:', error);
                                        });
                            });


                        })</script>
    }
